---
title: "Link the sensory space and the liking to detect an optimum product"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{link-the-sensory-space-and-the-liking-to-detect-an-optimum-product}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sensometrics)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_perform_prefmap.Rmd: do not edit by hand -->

# Link sensory profiles and hedonic data through a preference mapping

The preference mapping is based on the results of the MCA provided by the `get_senso_mapping()` function (see article *"Represent the sensory space on a map* for more details). 

The graph of individuals (i.e. products) is discretized to form a grid of fictitious products. For each `x` * `y` coordinate of these fictitious products, the liking score is predicted for each panelist. A linear regression model `liking ~ coordinate dim 1 + coordinate dim 2 + coordinate dim 1 * coordinate dim 2` is used to predict the liking score for each panelist.

Then, the fictitious product is stamped "liked" if its predicted score is greater than or equal to the average of the liking scores given by the panelist. Otherwise, it is stamped "unliked". The proportion of panelists who liked each fictitious product in the grid is then calculated. This value is projected onto the map using a response surface.

This graph is displayed in an interactive format.


```{r examples-get_prefmap}
data("data_sensory_toy")
data("data_products_toy")
data("data_hedonic_toy")

res_mapping <- get_senso_mapping(
  data_sensory = data_sensory_toy |> rename_with(tolower),
  data_products = data_products_toy |> rename_with(tolower)
)

get_prefmap(
  res_mapping = res_mapping,
  data_hedonic = data_hedonic_toy |> rename_with(tolower)
)
```

